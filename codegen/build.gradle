plugins {
    id 'java-library'
    id 'kotlin'
}
apply plugin: 'kotlin-kapt'

kapt {
    generateStubs = true
}

sourceSets {
    main {
        java {
            srcDir "${project(':browser').path}/tmp/kapt/main/kotlinGenerated/"
        }
    }
}

dependencies {
    implementation deps.kotlinStdLib
}

java {
    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8
}

compileKotlin {
    kotlinOptions {
        jvmTarget = "1.8"
    }
}

gradle.projectsEvaluated {
    tasks.withType(JavaCompile) {
        options.compilerArgs << "-XXLanguage:+NonParenthesizedAnnotationsOnFunctionalTypes"
    }
}

dependencies {
    kapt project(":annotation")
    compileOnly project(':annotation')
    
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    
    implementation deps.kotlinStdLib
    implementation deps.kotlinPoet
    implementation deps.autoService
    kapt deps.autoService
}
